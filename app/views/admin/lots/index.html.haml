.d-flex.justify-content-between.align-items-center.mb-4
  %h1.h3.mb-0
    %i.bi.bi-map-fill.me-2
    Lots

.card.shadow-sm.border-0.mb-4
  .card-header.fw-semibold New Lot
  .card-body
    = form_with model: @lot, url: admin_lots_path do |f|
      - if @lot.errors.any?
        .alert.alert-danger.mb-3
          = @lot.errors.full_messages.to_sentence
      .row.g-3
        .col-sm-4
          = f.label :name, class: "form-label form-label-sm"
          = f.text_field :name, class: "form-control form-control-sm #{'is-invalid' if @lot.errors[:name].any?}", required: true, placeholder: "e.g. Lot A"
        .col-sm-3
          = f.label :number, class: "form-label form-label-sm"
          = f.text_field :number, class: "form-control form-control-sm #{'is-invalid' if @lot.errors[:number].any?}", placeholder: "e.g. 001"
        .col-sm-4
          = f.label :owner_id, "Owner", class: "form-label form-label-sm"
          = f.select :owner_id, @users.map { [it.email_address, it.id] },
            { prompt: "Select owner" },
            class: "form-select form-select-sm #{'is-invalid' if @lot.errors[:owner_id].any?}"
        .col-sm-1.d-flex.align-items-end
          = f.submit "Add", class: "btn btn-primary btn-sm w-100"

= render_lots_table(lots: @lots, users: @users)
