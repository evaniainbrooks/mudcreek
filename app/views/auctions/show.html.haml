.row.g-0.align-items-stretch{ style: "min-height: 70vh" }
  .col-lg-4.bg-body.border-end.p-4.p-lg-5
    .position-sticky{ style: "top: 1.5rem" }
      - if @auction.poster.attached?
        = image_tag @auction.poster, class: "img-fluid rounded-3 mb-4 shadow-sm w-100 object-fit-cover"

      %h1.fw-bold.lh-tight.mb-2= @auction.name

      - if @registration
        - if @registration.pending?
          .d-flex.align-items-center.gap-2.mb-4
            %span.badge.text-bg-warning.py-2.px-3 Registration Pending
            %small.text-muted You'll be notified by email when approved.
        - elsif @registration.approved?
          .mb-4
            %span.badge.text-bg-success.py-2.px-3 Registered
        - elsif @registration.rejected?
          .mb-4
            %span.badge.text-bg-danger.py-2.px-3 Registration Declined
      - else
        %button.btn.btn-primary.w-100.mb-4{data: { bs_toggle: "modal", bs_target: "#auction-register-modal" }}
          %i.bi.bi-person-plus.me-2
          Register Now

      - if @auction.starts_at
        .d-flex.align-items-center.gap-2.mb-2.text-muted
          %i.bi.bi-calendar-event.flex-shrink-0
          %span= @auction.starts_at.to_fs(:long)

      - if @auction.ends_at
        .d-flex.align-items-center.gap-2.mb-2.text-muted
          %i.bi.bi-calendar-check.flex-shrink-0
          %span= @auction.ends_at.to_fs(:long)

      - if @auction.address
        - addr = @auction.address
        .d-flex.align-items-start.gap-2.mb-2.text-muted
          %i.bi.bi-geo-alt-fill.flex-shrink-0.mt-1
          %span= [ addr.street_address, addr.city, addr.province, addr.country ].compact_blank.join(", ")

      - if @auction.description.present?
        %hr.my-4
        .auction-description= @auction.description

  .col-lg-8.bg-body-secondary.p-4.p-lg-5
    - if @auction_listings.any?
      .row.row-cols-1.row-cols-sm-2.row-cols-xl-3.g-4
        = render partial: "auctions/listing_card", collection: @auction_listings, as: :auction_listing
    - else
      .py-5.text-center.text-muted
        %i.bi.bi-tag.mb-3.d-block{ style: "font-size: 3rem" }
        %p.mb-0 No listings available for this auction yet.

- unless @registration
  = render "register_modal", auction: @auction
